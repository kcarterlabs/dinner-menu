# Example Docker Compose update with MongoDB

services:
  # Add MongoDB service
  mongodb:
    image: mongo:7
    container_name: dinner-menu-mongodb
    restart: unless-stopped
    environment:
      MONGO_INITDB_ROOT_USERNAME: admin
      MONGO_INITDB_ROOT_PASSWORD: ${MONGO_PASSWORD:-changeme}
    ports:
      - "27017:27017"
    volumes:
      - mongodb_data:/data/db
      - mongodb_config:/data/configdb
    networks:
      - dinner-menu-network

  api:
    # ... existing api configuration ...
    environment:
      - RAPID_API_FORECAST_KEY=${RAPID_API_FORECAST_KEY}
      - MONGODB_URI=mongodb://admin:${MONGO_PASSWORD:-changeme}@mongodb:27017/
      - MONGODB_DATABASE=dinner_menu
    depends_on:
      - mongodb

volumes:
  mongodb_data:
  mongodb_config:
